{% extends 'base.html' %}

{% block title %}Dashboard - NTWKInfo{% endblock %}

{% block content %}
<!-- GÅ‚Ã³wny kontener dashboardu -->
<div class="dashboard-container">
  <!-- NagÅ‚Ã³wek dashboardu z powitaniem -->
  <header class="dashboard-header">
    <h1>Witaj, {{ user.username }}!</h1>
    <p class="dashboard-subtitle">ZarzÄ…dzaj swoim kontem NTWKInfo</p>
  </header>

  <!-- Responsywny grid z kartami informacyjnymi i akcjami -->
  <div class="dashboard-grid">
    <!-- KARTA 1: Informacje o koncie uÅ¼ytkownika -->
    <section class="dashboard-card">
      <h2>Informacje o koncie</h2>
      <div class="account-info">
        <!-- Nazwa uÅ¼ytkownika -->
        <div class="info-row">
          <span class="label">Nazwa uÅ¼ytkownika:</span>
          <span class="value">{{ user.username }}</span>
        </div>
        <!-- Email uÅ¼ytkownika -->
        <div class="info-row">
          <span class="label">Email:</span>
          <span class="value">{{ user.email }}</span>
        </div>
        <!-- Status konta -->
        <div class="info-row">
          <span class="label">Status:</span>
          <span class="value status-active">Aktywne</span>
        </div>
      </div>
    </section>

    <!-- KARTA 2: Akcje zarzÄ…dzania kontem -->
    <section class="dashboard-card">
      <h2>ZarzÄ…dzanie kontem</h2>
      <div class="dashboard-actions">
        <!-- Przycisk: Zmiana hasÅ‚a -->
        <button class="action-btn primary" onclick="showChangePasswordModal()">
          <span class="icon">ğŸ”’</span>
          ZmieÅ„ hasÅ‚o
        </button>
        <!-- Przycisk: Edycja profilu -->
        <button class="action-btn secondary" onclick="showEditProfileModal()">
          <span class="icon">âœï¸</span>
          Edytuj profil
        </button>
        <!-- Przycisk: Preferencje -->
        <button class="action-btn secondary" onclick="showPreferencesModal()">
          <span class="icon">âš™ï¸</span>
          Preferencje
        </button>
        <!-- Przycisk: Testowanie alertÃ³w pogodowych (wysÅ‚anie testowego e-maila) -->
        <button class="action-btn secondary" id="testWeatherAlertsBtn" onclick="testWeatherAlerts()">
          <span class="icon">ğŸ“§</span>
          Testuj alerty pogodowe
        </button>
      </div>
    </section>

    <!-- KARTA 3: Szybkie linki do gÅ‚Ã³wnych sekcji aplikacji -->
    <section class="dashboard-card">
      <h2>Szybkie linki</h2>
      <div class="quick-links">
        <!-- Link do strony gÅ‚Ã³wnej -->
        <a href="{{ url_for('main.index') }}" class="quick-link">
          <span class="icon">ğŸ </span>
          Strona gÅ‚Ã³wna
        </a>
        <!-- Link do sekcji wiadomoÅ›ci -->
        <a href="{{ url_for('main.news') }}" class="quick-link">
          <span class="icon">ğŸ“°</span>
          WiadomoÅ›ci
        </a>
        <!-- Link do sekcji pogody -->
        <a href="{{ url_for('main.weather') }}" class="quick-link">
          <span class="icon">ğŸŒ¤ï¸</span>
          Pogoda
        </a>
        <!-- Link do wylogowania -->
        <a href="{{ url_for('auth.logout') }}" class="quick-link logout">
          <span class="icon">ğŸšª</span>
          Wyloguj siÄ™
        </a>
      </div>
    </section>
  </div>
</div>

<!-- MODAL: Zmiana hasÅ‚a -->
<div id="changePasswordModal" class="auth-overlay hidden">
  <div class="auth-modal">
    <div class="auth-box">
      <form id="changePasswordForm">
        <!-- Przycisk zamkniÄ™cia modala -->
        <button type="button" class="auth-close" onclick="closeChangePasswordModal()">Ã—</button>
        <h2>ZmieÅ„ hasÅ‚o</h2>

        <!-- Pole na obecne hasÅ‚o -->
        <label>Obecne hasÅ‚o</label>
        <input name="current_password" type="password" placeholder="Wpisz obecne hasÅ‚o" required>

        <!-- Pole na nowe hasÅ‚o -->
        <label>Nowe hasÅ‚o</label>
        <input name="new_password" type="password" placeholder="Wpisz nowe hasÅ‚o" required>

        <!-- Pole na potwierdzenie nowego hasÅ‚a -->
        <label>PowtÃ³rz nowe hasÅ‚o</label>
        <input name="confirm_password" type="password" placeholder="PowtÃ³rz nowe hasÅ‚o" required>

        <button type="submit" class="auth-submit">ZmieÅ„ hasÅ‚o</button>
      </form>
    </div>
  </div>
</div>

<!-- ZaÅ‚aduj plik CSS dedykowany dla dashboardu -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
<!-- ZaÅ‚aduj skrypt obsÅ‚ugujÄ…cy interakcje dashboardu -->
<script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>

{% endblock %}
