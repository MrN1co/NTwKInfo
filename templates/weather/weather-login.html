{% extends "base.html" %}

{% block content %}

<link rel="stylesheet" href="{{ url_for('static', filename='css/weather_styles.css') }}">

<main class="page">


  <section class="search-row">
    <input id="cityInput" type="text" placeholder="Wpisz miasto">
    <button id="searchBtn">Szukaj</button>
  </section>


  <section class="cards-grid">

    <div class="card card-current">
      <button
        class="favorite-btn"
        id="favoriteBtn"
        data-logged-in="{% if current_user is defined and current_user.is_authenticated %}1{% else %}0{% endif %}">
        ♥
      </button>

      <div class="current-city" id="cityName">Kraków</div>
      <div class="current-date" id="currentDate">Dziś</div>

      <div class="current-main-row">
        <div class="current-left">
          <div class="current-temp" id="currentTemp">--°C</div>
          <div class="current-desc" id="currentDesc">---</div>

          <div class="current-extra">
            <div class="row">
              <span class="label">Ciśnienie:</span>
              <span id="currentPressure">--</span>
              <span>hPa</span>
            </div>
            <div class="row">
              <span class="label">Opady:</span>
              <span id="currentPrecip">--</span>
              <span>mm</span>
            </div>
          </div>
        </div>

        <div class="current-right">
          <img id="currentIcon" alt="Ikona pogody">
        </div>
      </div>
    </div>

    <div class="card card-chart">
      <canvas id="chartCanvas" style="max-width:100%; height:260px; display:block;"></canvas>
      <img id="chartImg" alt="Wykres temperatury i opadów" style="display:none;">
      <div class="chart-caption">Wykres temperatury godzinowy</div>
    </div>

  </section>

  
  <section class="card card-forecast">
    <div class="forecast-strip" id="forecastStrip"></div>
  </section>

  <!-- ULUBIONE MIASTA — blok dodany -->
  {% if True %}
  <section class="card card-favorites" id="favoritesSection">
    <h2 class="favorites-title">Ulubione miasta</h2>

    <div class="favorites-list" id="favoritesList">
      <div class="fav-row">
        <span class="fav-name">Brak zapisanych ulubionych lokalizacji</span>
        <span class="fav-temp"></span>
      </div>
    </div>
  </section>
  {% endif %}

</main>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<script src="{{ url_for('static', filename='js/weather_icons.js') }}"></script>
<script src="{{ url_for('static', filename='js/weather_app.js') }}"></script>

{% endblock %}
