<?xml version="1.0" encoding="utf-8"?><testsuites name="pytest tests"><testsuite name="pytest" errors="0" failures="1" skipped="0" tests="82" time="17.111" timestamp="2026-01-12T18:01:17.079794+01:00" hostname="DESKTOP-8IARF5I"><testcase classname="tests.integration.main.test_main_integration" name="test_index_renders_with_news_and_rates" time="0.053" /><testcase classname="tests.integration.main.test_main_integration" name="test_index_renders_empty_news" time="0.042" /><testcase classname="tests.integration.main.test_main_integration" name="test_helper_redirects" time="0.008" /><testcase classname="tests.integration.test_ekonomia_integration.TestEkonomiaIntegration" name="test_ekonomia_main_page_returns_html" time="1.872" /><testcase classname="tests.integration.test_ekonomia_integration.TestEkonomiaIntegration" name="test_ekonomia_api_exchange_rates_returns_json" time="1.537" /><testcase classname="tests.integration.test_ekonomia_integration.TestEkonomiaIntegration" name="test_ekonomia_chart_endpoint_returns_image" time="1.559" /><testcase classname="tests.integration.test_ekonomia_integration.TestEkonomiaIntegration" name="test_favorite_currencies_get_requires_authentication" time="1.294" /><testcase classname="tests.integration.test_ekonomia_integration.TestEkonomiaIntegration" name="test_favorite_currencies_full_workflow_with_auth" time="1.607" /><testcase classname="tests.integration.test_weather_endpoints" name="test_weather_page_returns_html" time="1.494" /><testcase classname="tests.integration.test_weather_endpoints" name="test_api_forecast_returns_normalized_json" time="1.462"><failure message="assert 500 == 200&#10; +  where 500 = &lt;WrapperTestResponse streamed [500 INTERNAL SERVER ERROR]&gt;.status_code">client = &lt;FlaskClient &lt;Flask 'app'&gt;&gt;
monkeypatch = &lt;_pytest.monkeypatch.MonkeyPatch object at 0x000001370623FB50&gt;

    def test_api_forecast_returns_normalized_json(client, monkeypatch):
        """
        Integracyjny test endpointu API:
        - mockujemy OpenWeather (requests.get)
        - sprawdzamy strukturę JSON
        - monkeypatch to fixture pytest do podmiany funkcji w locie
        """
    
        # --- FAKE RESPONSE Z OPENWEATHER ---
        fake_openweather_response = {
            "city": {
                "name": "Kraków",
                "coord": {"lat": 50.06, "lon": 19.94},
                "timezone": 3600,
            },
            "list": [
                {
                    "dt": 1700000000,
                    "temp": {
                        "min": 5.0,
                        "max": 10.0,
                        "day": 8.0,
                    },
                    "pressure": 1015,
                    "rain": 1.2,
                    "weather": [
                        {
                            "icon": "10d",
                            "description": "lekki deszcz",
                        }
                    ],
                }
            ],
        }
    
        # --- MOCK requests.get ---
        def mock_requests_get(*args, **kwargs):
            mock_resp = Mock()
            mock_resp.status_code = 200
            mock_resp.json.return_value = fake_openweather_response
            mock_resp.raise_for_status = lambda: None
            return mock_resp
    
        monkeypatch.setattr(weather_app.requests, "get", mock_requests_get)
    
        # --- WYWOŁANIE ENDPOINTU ---
        response = client.get("/weather/api/forecast")
    
&gt;       assert response.status_code == 200
E       assert 500 == 200
E        +  where 500 = &lt;WrapperTestResponse streamed [500 INTERNAL SERVER ERROR]&gt;.status_code

tests\integration\test_weather_endpoints.py:79: AssertionError</failure></testcase><testcase classname="tests.unit.ekonomia.test_api_client.TestAPIClient" name="test_init_default_base_url" time="0.003" /><testcase classname="tests.unit.ekonomia.test_api_client.TestAPIClient" name="test_init_custom_base_url" time="0.004" /><testcase classname="tests.unit.ekonomia.test_api_client.TestAPIClient" name="test_get_json_success" time="0.003" /><testcase classname="tests.unit.ekonomia.test_api_client.TestAPIClient" name="test_get_json_with_params" time="0.005" /><testcase classname="tests.unit.ekonomia.test_api_client.TestAPIClient" name="test_get_json_request_exception" time="0.004" /><testcase classname="tests.unit.ekonomia.test_api_client.TestAPIClient" name="test_get_json_http_error" time="0.010" /><testcase classname="tests.unit.ekonomia.test_api_client.TestAPIClient" name="test_get_json_timeout" time="0.004" /><testcase classname="tests.unit.ekonomia.test_currency_rates.TestCurrencyRates" name="test_init_default_tables" time="0.004" /><testcase classname="tests.unit.ekonomia.test_currency_rates.TestCurrencyRates" name="test_init_custom_tables" time="0.005" /><testcase classname="tests.unit.ekonomia.test_currency_rates.TestCurrencyRates" name="test_set_tables_valid" time="0.004" /><testcase classname="tests.unit.ekonomia.test_currency_rates.TestCurrencyRates" name="test_set_tables_invalid_filtered" time="0.004" /><testcase classname="tests.unit.ekonomia.test_currency_rates.TestCurrencyRates" name="test_set_tables_empty" time="0.003" /><testcase classname="tests.unit.ekonomia.test_currency_rates.TestCurrencyRates" name="test_get_current_rates_success" time="0.012" /><testcase classname="tests.unit.ekonomia.test_currency_rates.TestCurrencyRates" name="test_get_current_rates_multiple_tables" time="0.007" /><testcase classname="tests.unit.ekonomia.test_currency_rates.TestCurrencyRates" name="test_get_current_rates_empty_response" time="0.003" /><testcase classname="tests.unit.ekonomia.test_currency_rates.TestCurrencyRates" name="test_get_current_rates_none_response" time="0.003" /><testcase classname="tests.unit.ekonomia.test_currency_rates.TestCurrencyRates" name="test_get_currency_list_success" time="0.013" /><testcase classname="tests.unit.ekonomia.test_currency_rates.TestCurrencyRates" name="test_get_currency_list_multiple_tables" time="0.006" /><testcase classname="tests.unit.ekonomia.test_currency_rates.TestCurrencyRates" name="test_get_currency_list_empty_response" time="0.005" /><testcase classname="tests.unit.ekonomia.test_currency_rates.TestCurrencyRates" name="test_update_success" time="0.013" /><testcase classname="tests.unit.ekonomia.test_fetch_nbp.TestFetchNBP" name="test_get_daily_currencies_success" time="0.014" /><testcase classname="tests.unit.ekonomia.test_fetch_nbp.TestFetchNBP" name="test_get_daily_currencies_error" time="0.035" /><testcase classname="tests.unit.ekonomia.test_fetch_nbp.TestFetchNBP" name="test_fetch_nbprates_success" time="0.020" /><testcase classname="tests.unit.ekonomia.test_fetch_nbp.TestFetchNBP" name="test_fetch_nbprates_filters_old_dates" time="0.006" /><testcase classname="tests.unit.ekonomia.test_fetch_nbp.TestFetchNBP" name="test_fetch_nbprates_removes_duplicates" time="0.035" /><testcase classname="tests.unit.ekonomia.test_fetch_nbp.TestFetchNBP" name="test_fetch_nbprates_error_handling" time="0.023" /><testcase classname="tests.unit.ekonomia.test_fetch_nbp.TestFetchNBP" name="test_fetch_gold_success" time="0.014" /><testcase classname="tests.unit.ekonomia.test_fetch_nbp.TestFetchNBP" name="test_fetch_gold_error" time="0.013" /><testcase classname="tests.unit.ekonomia.test_fetch_nbp.TestFetchNBP" name="test_update_json_adds_new_records" time="0.019" /><testcase classname="tests.unit.ekonomia.test_fetch_nbp.TestFetchNBP" name="test_update_json_skips_duplicates" time="0.017" /><testcase classname="tests.unit.ekonomia.test_fetch_nbp.TestFetchNBP" name="test_update_json_creates_new_file" time="0.225" /><testcase classname="tests.unit.ekonomia.test_fetch_nbp.TestFetchNBP" name="test_run_update" time="0.007" /><testcase classname="tests.unit.ekonomia.test_fetch_nbp.TestFetchNBP" name="test_currency_codes_constant" time="0.006" /><testcase classname="tests.unit.ekonomia.test_fetch_nbp.TestFetchNBP" name="test_data_dir_exists" time="0.003" /><testcase classname="tests.unit.ekonomia.test_gold_prices.TestGoldPrices" name="test_init" time="0.002" /><testcase classname="tests.unit.ekonomia.test_gold_prices.TestGoldPrices" name="test_get_current_price_success" time="0.007" /><testcase classname="tests.unit.ekonomia.test_gold_prices.TestGoldPrices" name="test_get_current_price_multiple_entries" time="0.003" /><testcase classname="tests.unit.ekonomia.test_gold_prices.TestGoldPrices" name="test_get_current_price_empty_response" time="0.003" /><testcase classname="tests.unit.ekonomia.test_gold_prices.TestGoldPrices" name="test_get_current_price_none_response" time="0.004" /><testcase classname="tests.unit.ekonomia.test_gold_prices.TestGoldPrices" name="test_update_success" time="0.003" /><testcase classname="tests.unit.ekonomia.test_gold_prices.TestGoldPrices" name="test_update_empty_response" time="0.009" /><testcase classname="tests.unit.ekonomia.test_gold_prices.TestGoldPrices" name="test_update_none_response" time="0.002" /><testcase classname="tests.unit.ekonomia.test_gold_prices.TestGoldPrices" name="test_update_called_twice" time="0.003" /><testcase classname="tests.unit.ekonomia.test_historical_data.TestHistoricalData" name="test_init" time="0.004" /><testcase classname="tests.unit.ekonomia.test_historical_data.TestHistoricalData" name="test_get_historical_rates_df_success" time="0.006" /><testcase classname="tests.unit.ekonomia.test_historical_data.TestHistoricalData" name="test_get_historical_rates_df_empty_response" time="0.006" /><testcase classname="tests.unit.ekonomia.test_historical_data.TestHistoricalData" name="test_get_historical_rates_df_multiple_tables" time="0.011" /><testcase classname="tests.unit.ekonomia.test_historical_data.TestHistoricalData" name="test_get_historical_gold_prices_success" time="0.011" /><testcase classname="tests.unit.ekonomia.test_historical_data.TestHistoricalData" name="test_get_historical_gold_prices_empty_response" time="0.004" /><testcase classname="tests.unit.ekonomia.test_historical_data.TestHistoricalData" name="test_get_historical_gold_prices_none_response" time="0.003" /><testcase classname="tests.unit.ekonomia.test_historical_data.TestHistoricalData" name="test_get_historical_gold_prices_multiple_periods" time="0.006" /><testcase classname="tests.unit.ekonomia.test_historical_data.TestHistoricalData" name="test_get_historical_gold_prices_date_conversion" time="0.014" /><testcase classname="tests.unit.ekonomia.test_historical_data.TestHistoricalData" name="test_get_historical_gold_prices_custom_months" time="0.025" /><testcase classname="tests.unit.ekonomia.test_homepage_rates.TestHomepageRates" name="test_json_only_all_present_no_api" time="0.005" /><testcase classname="tests.unit.ekonomia.test_homepage_rates.TestHomepageRates" name="test_missing_json_uses_api_fallback" time="0.008" /><testcase classname="tests.unit.ekonomia.test_homepage_rates.TestHomepageRates" name="test_no_data_returns_empty" time="0.030" /><testcase classname="tests.unit.ekonomia.test_manager.TestManager" name="test_init" time="0.048" /><testcase classname="tests.unit.ekonomia.test_manager.TestManager" name="test_update_all_success" time="0.012" /><testcase classname="tests.unit.ekonomia.test_manager.TestManager" name="test_list_currencies_default_table" time="0.015" /><testcase classname="tests.unit.ekonomia.test_manager.TestManager" name="test_list_currencies_custom_table" time="0.012" /><testcase classname="tests.unit.ekonomia.test_manager.TestManager" name="test_create_plot_image_success" time="0.609" /><testcase classname="tests.unit.ekonomia.test_manager.TestManager" name="test_create_plot_image_empty_dataframe" time="0.267" /><testcase classname="tests.unit.ekonomia.test_manager.TestManager" name="test_create_plot_image_none_dataframe" time="0.146" /><testcase classname="tests.unit.ekonomia.test_manager.TestManager" name="test_create_plot_image_custom_parameters" time="0.270" /><testcase classname="tests.unit.ekonomia.test_manager.TestManager" name="test_create_plot_image_different_colors" time="1.092" /><testcase classname="tests.unit.main.test_helpers.TestHelpers" name="test_select_featured_with_items" time="0.001" /><testcase classname="tests.unit.main.test_helpers.TestHelpers" name="test_select_featured_empty" time="0.002" /><testcase classname="tests.unit.main.test_helpers.TestHelpers" name="test_summarize_short" time="0.001" /><testcase classname="tests.unit.main.test_helpers.TestHelpers" name="test_summarize_trim" time="0.001" /><testcase classname="tests.unit.main.test_helpers.TestHelpers" name="test_format_published_iso" time="0.001" /><testcase classname="tests.unit.main.test_helpers.TestHelpers" name="test_format_published_simple" time="0.003" /><testcase classname="tests.unit.main.test_helpers.TestHelpers" name="test_format_published_invalid" time="0.002" /></testsuite></testsuites>